<div data-controller="session">

  <h1>Lecture en cours</h1>

  <!-- Bloc du texte à lire -->
  <div style="margin: 20px 0; padding: 15px; border: 1px solid #ccc;">
    <h2><%= @reading_text.title %></h2>
    <%= simple_format(@reading_text.content) %>
  </div>

  <!-- Timer -->
  <p>
    Temps écoulé :
    <span data-session-target="timer">0</span> secondes
  </p>

  <!-- Statut -->
  <p id="status">En attente de la voix de l'élève…</p>

  <!-- Formulaire d'arrêt -->
  <%= form_with url: "/sessions/stop", method: :post, data: { turbo: false } do %>

    <%= hidden_field_tag :session_id, @session.id %>

    <%= hidden_field_tag :duration_seconds,
                         0,
                         data: { session_target: "duration" } %>

    <%= hidden_field_tag :aborted,
                         false,
                         data: { session_target: "aborted" } %>

    <%= submit_tag "Arrêter",
                   data: { session_target: "stopButton" } %>

  <% end %>

</div>